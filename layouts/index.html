{{ define "main" }}
<section class="hero">
    <h1>{{ .Site.Title }}</h1>
    <p class="subtitle">{{ .Site.Params.subtitle }}</p>
</section>

<div class="index-layout">
    {{ partial "index-sidebar.html" . }}
    
    <section class="post-list">
        {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts") }}
        {{ range $paginator.Pages }}
        <article class="post-card">
            <a href="{{ .Permalink }}" class="post-card-link">
                <h2 class="post-title">{{ .Title }}</h2>
                <div class="post-meta">
                    <time>{{ .Date.Format "2006-01-02" }}</time>
                    <span>·</span>
                    <span>{{ .ReadingTime }} 分钟</span>
                    {{ if .Params.categories }}
                    <span>·</span>
                    {{ range $index, $cat := (first 1 .Params.categories) }}
                    <span class="post-category">{{ $cat }}</span>
                    {{ end }}
                    {{ end }}
                </div>
                <p class="post-summary">{{ .Summary | plainify | truncate 150 }}</p>
            </a>
        </article>
        {{ end }}
        
        {{ template "_internal/pagination.html" . }}
    </section>

    {{ partial "sidebar.html" . }}
</div>
{{ end }}
